{"version":3,"file":"pages/index/index.js","sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///./node_modules/@babel/runtime/regenerator/index.js","webpack:///./src/pages/index/index.tsx","webpack:///./node_modules/react/cjs/react-jsx-runtime.production.min.js","webpack:///./src/pages/index/index.scss","webpack:///./src/pages/index/index.tsx?aff8","webpack:///./src/utils/index.tsx"],"sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","module.exports = require(\"regenerator-runtime\");\n","import { useEffect, useState, FC } from \"react\";\nimport { View, Image, Text, ScrollView } from \"@tarojs/components\";\nimport Taro from \"@tarojs/taro\";\nimport \"./index.scss\";\nimport Native from \"../../utils/index\";\n\ninterface imagePara {\n  author: string;\n  category: string;\n  createdAt: string;\n  desc: string;\n  images: string[];\n  likeCounts: number;\n  publishedAt: string;\n  stars: number;\n  title: string;\n  type: string;\n  url: string;\n  views: number;\n  _id: string;\n}\n\nconst Index: FC = () => {\n  const [pageStatus, setPageStatus] = useState(\"next\");\n  const [picList, setPicList] = useState([]);\n  const [totalCount, setTotalCount] = useState(0);\n  const [pageIndex, setPageIndex] = useState(1);\n  const [loadCount, setLoadCount] = useState(10);\n\n  const getPic = async () => {\n    const params = `https://gank.io/api/v2/data/category/Girl/type/Girl/page/${pageIndex}/count/10`;\n    const res: any = await Taro.request({\n      url: params,\n    });\n    if (res.data.data) {\n      setLoadCount(\n        pageStatus === \"next\"\n          ? loadCount + res.data.data.length\n          : loadCount - res.data.data.length\n      );\n    }\n    setPicList(res.data.data);\n    setTotalCount(res.data.total_counts);\n  };\n\n  useEffect(() => {\n    getPic();\n  }, [pageIndex]);\n\n  const handleNext = () => {\n    // goToTop();\n    setPageStatus(\"next\");\n    if (loadCount < totalCount) {\n      setPageIndex(pageIndex + 1);\n    } else {\n      Native.showToast(\"没有更多了！\");\n    }\n  };\n\n  const goToTop = () => {\n    Taro.pageScrollTo({\n      scrollTop: 0,\n    });\n  };\n\n  const handlePrev = () => {\n    if (pageIndex === 1) {\n      Native.showToast(\"当前是第一页哦！\");\n    } else {\n      setPageStatus(\"prev\");\n      setPageIndex(pageIndex - 1);\n    }\n  };\n\n  const previewImg = (url) => {\n    // console.log(111, url)\n    Taro.previewImage({\n      current:\n        \"https://ae01.alicdn.com/kf/Uec00959acd9c4d0aa900d5fb8ea481931.jpg\", // 当前显示图片的http链接\n      urls: [\n        \"https://ae01.alicdn.com/kf/Uec00959acd9c4d0aa900d5fb8ea481931.jpg\",\n      ], // 需要预览的图片http链接列表\n      complete: (res) => {\n        console.log(233333, res);\n      },\n    });\n  };\n\n  return (\n    <View className=\"wrapper\">\n      {picList.map((item: imagePara) => (\n        <View key={item._id}>\n          <ScrollView className=\"image-wrapper\">\n            <Image\n              onClick={() => previewImg(item.url)}\n              src={`https://images.weserv.nl/?url=${item.url}`}\n              mode=\"aspectFit\"\n            />\n          </ScrollView>\n        </View>\n      ))}\n      <View className=\"footer\">\n        <View className=\"prev\" onClick={handlePrev}>\n          上一页\n        </View>\n        <View className=\"next\" onClick={handleNext}>\n          下一页\n        </View>\n      </View>\n    </View>\n  );\n};\n\nexport default Index;\n","/** @license React v17.0.2\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';require(\"object-assign\");var f=require(\"react\"),g=60103;exports.Fragment=60107;if(\"function\"===typeof Symbol&&Symbol.for){var h=Symbol.for;g=h(\"react.element\");exports.Fragment=h(\"react.fragment\")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,k){var b,d={},e=null,l=null;void 0!==k&&(e=\"\"+k);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(l=a.ref);for(b in a)n.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:g,type:c,key:e,ref:l,props:d,_owner:m.current}}exports.jsx=q;exports.jsxs=q;\n","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/babel-loader/lib/index.js!./index.tsx\"\nvar config = {\"navigationBarTitleText\":\"首页\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/index/index', {root:{cn:[]}}, config || {}))\n\n","import Taro from '@tarojs/taro';\n\nexport default class Native {\n  static async showToast(msg) {\n    return await Taro.showToast({\n      title: msg,\n      icon: 'none',\n      duration: 1000,\n    })\n  }\n}"],"mappings":";;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;;;;AAkBA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAGA;AADA;AACA;AAHA;AAEA;AACA;AAEA;AACA;AAKA;AACA;AAAA;AACA;AACA;AAdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAeA;AACA;AADA;AACA;AAGA;AACA;AACA;AACA;AAAA;AACA;AADA;AAGA;AACA;AAPA;AACA;AASA;AACA;AACA;AADA;AADA;AACA;AAKA;AACA;AACA;AADA;AAGA;AACA;AACA;AANA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AARA;AAFA;AACA;AAaA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AADA;AAEA;AACA;AAHA;AADA;AADA;AAFA;AAYA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAJA;AAZA;AAnEA;AACA;AA0FA;;;;;;;;;;;;;ACjHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACTA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;ACNA;AACA;AACA;;;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AACA;AAFA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;A","sourceRoot":""}